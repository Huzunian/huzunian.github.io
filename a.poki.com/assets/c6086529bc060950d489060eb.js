"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[6086],{6086:(e,t,a)=>{a.r(t),a.d(t,{showFeedbackEpic:()=>B,voteEpic:()=>D,voteFeedbackGivenEpic:()=>F});var o,r,i,n=a(9748),d=a(1893),l=a(4848),s=a(5069),c=a(1545),p=a(2817),u=a(7877),m=a(533),g=a(4406),f=a(4975),v=a(4978),h=a(8389),_=a(5322),x=a(6084),b=a(8855),y=a(7344),k=a(3748),w=a(8656),E=a(6151),I=a(111),N=a(8813),C=a(7447);function D(e,t,a){let{createApi:o}=a;return e.pipe((0,s.l)(h.Ns.type),(0,u.z)((e=>{let{gameId:a,direction:r,source:i}=e;const n=o(t.value,"vote");return(0,k.A)("rating",i,{method:"click",previousVote:(0,_.bF)(t.value,a)}),n("/vote",{method:"POST",body:JSON.stringify({game_id:a,vote:r})}).pipe((0,m.l)())})))}function F(e,t,a){let{createApi:o}=a;return e.pipe((0,s.l)(h.CE.type),(0,g.p)(6e4),(0,u.z)((e=>{let{voteDirection:a,message:r}=e;if(!r)return c.E;const i=o(t.value,"tracking"),n=(0,x.d)(t.value),d=(0,b.R6)(t.value),l=(0,y.lH)(t.value),s=(0,w.J1)(t.value),p=(0,E.N9)(t.value),u=(0,b.FK)(t.value),g=d.gameID===s.pokifordevs_game_id?d.gameVersion:void 0,f=document.getElementById("game-element");let v;f&&(v="".concat(f.clientWidth,"x").concat(f.clientHeight));return i("/playground-feedback",{method:"POST",body:JSON.stringify({p4d_game_id:s.pokifordevs_game_id,p4d_version_id:g,type:1===a?"thumbs_up":"thumbs_down",site_id:l.id,message:r,experiment:n,adblock:p,was_fullscreen:u,game_resolution:v})}).pipe((0,m.l)())})))}const A=d.ZP.textarea.withConfig({displayName:"ratings__FeedbackInput",componentId:"sc-xijagl-0"})(["font:14px/20px var(--fontProximaNova);background:var(--grey-7);border:2px solid var(--grey-5);color:var(--grey-3);border-radius:8px;margin:5px 0 1px 6px;height:86px;max-width:308px;width:100%;padding:12px 16px 0;resize:none;transition:background-color .2s ease-in-out;&:focus{outline:2px solid var(--grey-7);border-color:var(--poki-blue);background:var(--grey-9);}"]),O=(0,d.F4)(["0%{transform:rotate(0deg);}40%{transform:rotate(20deg);}43%{transform:rotate(25deg);}60%{transform:rotate(-15deg);}70%{transform:rotate(3deg);}80%{transform:rotate(-1deg);}85%{transform:rotate(0deg);}100%{transform:rotate(0deg);}"]),P=d.ZP.div.withConfig({displayName:"ratings__FeedbackSVGWrap",componentId:"sc-xijagl-1"})(["margin:0 13px 0 0;flex-shrink:0;&:hover{animation:"," 1s forwards;}"],O),S=(0,d.ZP)(C.default).withConfig({displayName:"ratings__FeedbackSVG",componentId:"sc-xijagl-2"})(["fill:var(--denim-blue);",""],(e=>{let{inverted:t}=e;return t&&"transform: scale3d(-1, -1, 1);"})),L=d.ZP.img.withConfig({displayName:"ratings__FeedbackBgImg",componentId:"sc-xijagl-3"})(["position:absolute;bottom:0;left:0;width:176px;height:88px;border-radius:8px;z-index:-1;"]),j=d.ZP.div.withConfig({displayName:"ratings__FeedbackTitleContainer",componentId:"sc-xijagl-4"})(["display:flex;align-items:center;padding:4px 0 0;font:700 12px/1 var(--fontProximaNova);text-transform:uppercase;color:var(--grey-3);strong{display:block;color:var(--denim-blue);font:18px/20px var(--fontTorus);text-transform:none;}"]);function B(e,t){return e.pipe((0,s.l)(h.Ns.type),(0,f.h)((e=>{let{gameId:a}=e;return(0,_.jG)(t.value,a)})),(0,v.w)((e=>{let{direction:a}=e;const d=(0,I.B)(t.value),s=Date.now(),u="feedback-input-".concat(s),m=(0,w.J1)(t.value);if(!m)return c.E;const g=(1===a?d.whatdoyoulike:d.whatdontyoulike).replace("%title","<strong>".concat(m.title,"?</strong>")),f=(0,l.Dq)(n.default.createElement(j,null,n.default.createElement(P,null,1===a?o||(o=n.default.createElement(S,{name:"thumbsUp",height:"24",width:"24"})):r||(r=n.default.createElement(S,{name:"thumbsUp",inverted:!0,height:"24",width:"24"}))),n.default.createElement("div",{dangerouslySetInnerHTML:{__html:g}}))),v={notification:{title:d.thank_you,theme:"feedback",autoExpire:4e3}},_={title:f,id:s,message:n.default.createElement(n.default.Fragment,null,n.default.createElement(A,{id:u,placeholder:d.enteryourtext}),i||(i=n.default.createElement(L,{src:"https://a.poki.com/images/star_feedback_v2.svg",alt:""}))),clickOutsideToClose:!0,actions:[{title:d.send,onClick:()=>{const e=document.getElementById(u).value;window.store.dispatch((0,h.CE)({voteDirection:a,message:e})),window.store.dispatch((0,N._I)({id:s})),window.store.dispatch((0,N.sc)(v))}}]};return(0,p.of)((0,N.sc)({notification:_}))})))}}}]);